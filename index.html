<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0">
        <title>M3U8 Player</title>
        <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://unpkg.com/popper.js@1.12.3"></script>
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
		<style>
		.w3-btn {margin-bottom:10px;}
		</style>
    </head>
    <body>
    <div class="w3-container w3-content w3-center w3-padding-64">直播</div>

        <div class="w3-row">
				<center><button style="width:80%;"  type="button" onclick="openViu99()">ViuTV</button></center><p>
				<center><button style="width:80%;"  type="button" onclick="openNow331()">now直播台</button></center><p>
				<center><button style="width:80%;"  type="button" onclick="openNow332()">now新聞台</button></center><p>
				
				
				
				<center><button style="width:80%;"  type="button" onclick="openRTHK31()">電台電視31</button></center><p>
				<center><button style="width:80%;"  type="button" onclick="openRTHK32()">電台電視32</button></center><p>
        </div>
		
		<script>
			function openFanTV() {
			  window.location.href = './player' + '#' + 'http://media.fantv.hk/m3u8/archive/channel2.m3u8';
			}
			function openRTHK31() {
			  window.location.href = './player' + '#' + 'https://rthklive1-lh.akamaihd.net/i/rthk31_1@167495/index_2052_av-b.m3u8';
			}
			function openRTHK32() {
			  window.location.href = './player' + '#' + 'https://rthklive2-lh.akamaihd.net/i/rthk32_1@168450/index_2052_av-b.m3u8';
			}
			function openViu99() {
				let reqBody99 = {
				  channelno: '099',
				  deviceId: 'AndroidTV',
				  deviceType: '5',
				  callerReferenceNo: '',
				  format: 'HLS',
				  mode: 'prod'
				};

				fetch('https://api.viu.now.com/p8/2/getLiveURL', {
				  method: 'POST',
				  body: JSON.stringify(reqBody99)
				})
				.then(response => response.json())
				.catch(error => console.error('Error:', error))
				.then(response => {
					window.location.href = './player' + '#' + response.asset.hls.adaptive;
				});	
			}
			function openNow331() {
				let reqBody331 = {
				  channelno: '331',
				  audioCode: '',
				  callerReferenceNo: '',
				  callerReferenceNo: '',
				  format: 'HLS',
				  mode: 'prod'
				};

				fetch('https://hkt-mobile-api.nowtv.now.com/09/1/getLiveURL', {
				  method: 'POST',
				  body: JSON.stringify(reqBody331)
				})
				.then(response => response.json())
				.catch(error => console.error('Error:', error))
				.then(response => {
					window.location.href = './player' + '#' + response.asset.hls.adaptive;
				});
			}
			function openNow332() {
				let reqBody332 = {
				  channelno: '332',
				  audioCode: '',
				  callerReferenceNo: '',
				  callerReferenceNo: '',
				  format: 'HLS',
				  mode: 'prod'
				};

				fetch('https://hkt-mobile-api.nowtv.now.com/09/1/getLiveURL', {
				  method: 'POST',
				  body: JSON.stringify(reqBody332)
				})
				.then(response => response.json())
				.catch(error => console.error('Error:', error))
				.then(response => {
					window.location.href = './player' + '#' + response.asset.hls.adaptive;
				});
			}
		</script>
		
    </body>
</html>
